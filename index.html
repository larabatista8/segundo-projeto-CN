<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="index.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <title> Calculo Numérico</title>
    </head>

    <body >
    <div class="container">
        <section >
            <h2>Métodos Diretos</h2> <br>
            <input type="number" id="a11" required>.x +  <input type="number" id="a12" required>.y+  <input type="number" id="a13" required>.z =  <input type="number" id="a14" required> 
<br><br>    <input type="number" id="a21" required>.x +  <input type="number" id="a22" required>.y+  <input type="number" id="a23" required>.z =  <input type="number" id="a24" required> 
<br><br>    <input type="number" id="a31" required>.x +  <input type="number" id="a32" required>.y+  <input type="number" id="a33" required>.z =  <input type="number" id="a34" required> 
            <div class="button-group">
                <button type="button" onclick="executaGauss()" >Calcular</button>
                <button type="button" onclick="limparGuass()" class="limpar-botao">
                    <i class="fas fa-broom"></i> Limpar
                </button>
            </div>
            <div class="resultado-metodo-direto">
                <p id="mensagem-erro-gauss"></p>
                <p id="resultado-gauss"></p>
                <br>
            </div>
        </section>

                <section>
            <h2>Métodos Iterativos</h2><br>
            <label for="E">Tensão (E):</label>
            <input type="number" id="E" required><br><br>
            <label for="R1">Resistência R1:</label>
            <input type="number" id="R1" required><br><br>
            <label for="R2">Resistência R2:</label>
            <input type="number" id="R2" required><br><br>
            <label for="R3">Resistência R3:</label>
            <input type="number" id="R3" required><br><br>
            <label for="R4">Resistência R4:</label>
            <input type="number" id="R4" required><br><br>
            <label for="R5">Resistência R5:</label>
            <input type="number" id="R5" required><br><br>

            <div class="button-group">
                <button type="button" onclick="calcularGaussSeidel()">Calcular Correntes</button>
                <button type="button" onclick="limparGaussSeidel()" class="limpar-botao">
                    <i class="fas fa-broom"></i> Limpar
                </button>
                        </div>
            <div class="resultado-metodo-iterativo">
                <p id="resultado-iterativo"></p><br>
            </div>
        </section>
        
        <section>
            <h2>Interpolação Polinomial</h2>
            <label for="i1">Corrente i1:</label>
            <input type="number" step="any" id="i1" required>
            <label for="v1">Voltagem V1:</label>
            <input type="number" step="any" id="v1" required><br><br>
        
            <label for="i2">Corrente i2:</label>
            <input type="number" step="any" id="i2" required>
            <label for="v2">Voltagem V2:</label>
            <input type="number" step="any" id="v2" required><br><br>
        
            <label for="i3">Corrente i3:</label>
            <input type="number" step="any" id="i3" required>
            <label for="v3">Voltagem V3:</label>
            <input type="number" step="any" id="v3" required><br><br>
        
            <label for="i4">Corrente i4:</label>
            <input type="number" step="any" id="i4" required>
            <label for="v4">Voltagem V4:</label>
            <input type="number" step="any" id="v4" required><br><br>
        
            <label for="i5">Corrente i5:</label>
            <input type="number" step="any" id="i5" required>
            <label for="v5">Voltagem V5:</label>
            <input type="number" step="any" id="v5" required><br><br>
        
            <label for="iTarget">Corrente i (para estimar V):</label>
            <input type="number" step="any" id="iTarget" required><br><br>
        
            <div class="button-group">
                <button type="button" onclick="interpolacaoLagrange()">Interpolação de Lagrange</button>
                <button type="button" onclick="interpolacaoNewton()">Interpolação de Newton</button>
                <button class="limpar-botao" onclick="limparInterpolacao()">
                    <i class="fas fa-broom"></i> Limpar
                </button>
            </div>
        
            <div class="resultado-interpolacao">
                <p id="resultado-lagrange"></p>
                <p id="resultado-newton"></p>
            </div>
        </section>

        <section>
            <h2>Integração Numérica</h2> <br>
            <div class="form-integracao">
                <p>Intervalo:</p> <br><br>
                <label for="x1">x1:</label>
                <input type="number" id="x1"  required>
                <label for="x5">x5:</label>
                <input type="number" id="x5"  required> <br><br>
                <p>Valores de f(x):</p>
                <label for="fx1">f(x1):</label>
                <input type="number" id="fx1"  required> <br><br>
                <label for="fx2">f(x2):</label>
                <input type="number" id="fx2"  required> <br><br>
                <label for="fx3">f(x3):</label>
                <input type="number" id="fx3"  required> <br><br>
                <label for="fx4">f(x4):</label>
                <input type="number" id="fx4"  required> <br><br>
                <label for="fx5">f(x5):</label>
                <input type="number" id="fx5"  required> <br><br>
                <div  class="button-group">
                <button type="button" onclick="trapezio()">Trapézio</button>
                <button type="button" onclick="simpson()">Simpson</button>
                <button type="button" onclick="limparinteg()" class="limpar-botao">
                    <i class="fas fa-broom"></i> Limpar
                </button>
                                </div>
                <div class="resultado-integracao">
                    <p id="resultado-trapezio"></p>
                    <p id="resultado-simpson"></p>
                    <br>
                </div>
            </div>
        
        </section>
    </div>


    <script>
        function obterValores() {
            const i = [
                parseFloat(document.getElementById("i1").value),
                parseFloat(document.getElementById("i2").value),
                parseFloat(document.getElementById("i3").value),
                parseFloat(document.getElementById("i4").value),
                parseFloat(document.getElementById("i5").value)
            ];
            
            const V = [
                parseFloat(document.getElementById("v1").value),
                parseFloat(document.getElementById("v2").value),
                parseFloat(document.getElementById("v3").value),
                parseFloat(document.getElementById("v4").value),
                parseFloat(document.getElementById("v5").value)
            ];
            
            const iTarget = parseFloat(document.getElementById("iTarget").value);
    
            if (i.includes(NaN) || V.includes(NaN) || isNaN(iTarget)) {
                alert("Por favor, preencha todos os campos corretamente.");
                return null;  // Retorna nulo para interromper a execução caso haja valores inválidos
            }
    
            return { i, V, iTarget };
        }
    
        // Função de interpolação de Lagrange para estimar o valor da voltagem V
        function interpolacaoLagrange() {
            const valores = obterValores();
            if (!valores) return;  // Interrompe a função se valores for nulo 
    
            const { i, V, iTarget } = valores;
            let result = 0;  // Inicializa a variável para armazenar o resultado da interpolação
    
            // Calcula o polinômio de Lagrange
            for (let j = 0; j < i.length; j++) {
                let termo = V[j];  // Começa o termo com o valor de V correspondente
                for (let k = 0; k < i.length; k++) {
                    if (k !== j) {
                        termo *= (iTarget - i[k]) / (i[j] - i[k]);  // Calcula o termo de Lagrange para o índice j
                    }
                }
                result += termo;  // Soma o termo ao resultado final
            }
    
            document.getElementById("resultado-lagrange").textContent = `Resultado da Interpolação de Lagrange: V ≈ ${result.toFixed(4)}`;
        }
    
        // Função de interpolação de Newton para estimar o valor da voltagem V
        function interpolacaoNewton() {
            const valores = obterValores();
            if (!valores) return;  // Interrompe a função se valores for nulo
    
            const { i, V, iTarget } = valores;
            const n = i.length;  // Define o número de pontos
            let coeficientes = [...V];  // Copia os valores de V para calcular os coeficientes de diferenças divididas
    
            // Calcula os coeficientes das diferenças divididas 
            for (let j = 1; j < n; j++) {
                for (let k = n - 1; k >= j; k--) {
                    coeficientes[k] = (coeficientes[k] - coeficientes[k - 1]) / (i[k] - i[k - j]);
                }
            }
    
            // Avaliação do polinômio usando os coeficientes calculados
            let result = coeficientes[n - 1];  // Inicializa o resultado com o último coeficiente
            for (let j = n - 2; j >= 0; j--) {
                result = result * (iTarget - i[j]) + coeficientes[j];  // Calcula o polinômio de Newton para iTarget
            }
    
            document.getElementById("resultado-newton").textContent = `Resultado da Interpolação de Newton: V ≈ ${result.toFixed(4)}`;
        }
    
        function limparInterpolacao() {
            document.getElementById("i1").value = '';
            document.getElementById("v1").value = '';
            document.getElementById("i2").value = '';
            document.getElementById("v2").value = '';
            document.getElementById("i3").value = '';
            document.getElementById("v3").value = '';
            document.getElementById("i4").value = '';
            document.getElementById("v4").value = '';
            document.getElementById("i5").value = '';
            document.getElementById("v5").value = '';
            document.getElementById("iTarget").value = '';
            
            document.getElementById("resultado-lagrange").textContent = '';
            document.getElementById("resultado-newton").textContent = '';
        }
    </script>
    
        <script src="gauss.js"></script>

        <script>
            function trapezio(){
                // salvando entradas do usuario
                let x1 = document.getElementById("x1").value;
                let x5 = document.getElementById("x5").value;
                let fx1 = document.getElementById("fx1").value;
                let fx2 = document.getElementById("fx2").value;
                let fx3 = document.getElementById("fx3").value;
                let fx4 = document.getElementById("fx4").value;
                let fx5 = document.getElementById("fx5").value;

                // convertendo numeros para float
                x1 = parseFloat(x1);
                x5 = parseFloat(x5);
                fx1 = parseFloat(fx1);
                fx2 = parseFloat(fx2);
                fx3 = parseFloat(fx3);
                fx4 = parseFloat(fx4);
                fx5 = parseFloat(fx5);
                
                // calculando integral
                let h = (x5-x1)/4.0;
                let integral= (h/2.0)*(fx1+(2*fx2)+(2*fx3)+(2*fx4)+fx5);

                // exibindo resultado
                let resultado = document.getElementById("resultado-trapezio");
                resultado.textContent = "Resultado pela regra do Trapézio: " + integral;

            }

            function simpson(){

                // salvando entradas do usuario
                let x1 = document.getElementById("x1").value;
                let x5 = document.getElementById("x5").value;
                let fx1 = document.getElementById("fx1").value;
                let fx2 = document.getElementById("fx2").value;
                let fx3 = document.getElementById("fx3").value;
                let fx4 = document.getElementById("fx4").value;
                let fx5 = document.getElementById("fx5").value;

                // convertendo numeros para float
                x1 = parseFloat(x1);
                x5 = parseFloat(x5);
                fx1 = parseFloat(fx1);
                fx2 = parseFloat(fx2);
                fx3 = parseFloat(fx3);
                fx4 = parseFloat(fx4);
                fx5 = parseFloat(fx5);
                
                // calculando integral
                let h = (x5-x1)/4.0;
                let integral= (h/3.0)*(fx1+(4*fx2)+(2*fx3)+(4*fx4)+fx5);

                // exibindo resultado
                let resultado = document.getElementById("resultado-simpson");
                resultado.textContent = "Resultado pela regra de Simpson: " + integral;

            }

            function limparinteg(){
            document.getElementById("x1").value='';
            document.getElementById("x5").value='';
            document.getElementById("fx1").value='';
            document.getElementById("fx2").value='';
            document.getElementById("fx3").value='';
            document.getElementById("fx4").value='';
            document.getElementById("fx5").value='';
            document.getElementById("resultado-trapezio").textContent='';
            document.getElementById("resultado-simpson").textContent='';

            }
        </script>

     <script src="iterativo.js"></script>
    <script>
        function calcularGaussSeidel() {
        const resultado = iterativo.calcularGaussSeidel();
        if (resultado.erro) {
            document.getElementById("resultado-iterativo").textContent = resultado.erro;
        } else {
            document.getElementById("resultado-iterativo").innerHTML = `
            Correntes:<br>
            I1 = ${resultado.I1} A<br>
            I2 = ${resultado.I2} A<br>
            I3 = ${resultado.I3} A<br>
            I4 = ${resultado.I4} A<br>
            I5 = ${resultado.I5} A<br>
            I6 = ${resultado.I6} A<br>
            `;
        }
}

        function limparGaussSeidel(){
            document.getElementById("E").value = '';
            document.getElementById("R1").value = '';
            document.getElementById("R2").value = '';
            document.getElementById("R3").value = '';
            document.getElementById("R4").value = '';
            document.getElementById("R5").value = '';
            document.getElementById("resultado-iterativo").textContent = '';
            }
    </script>

        
    </body>

</html>
